<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Mesure des durées de Navigation</title>
<style>
   pre.idl { border:solid thin; background:#eee; color:#000; padding:0.5em }
   pre.idl :link, pre.idl :visited { color:inherit; background:transparent }
   pre code { color:inherit; background:transparent }
   div.example { margin-left:1em; padding-left:1em; border-left:double; color:#222; background:#fcfcfc }
   .note { margin-left:2em; font-weight:bold; font-style:italic; color:#008000 }
   p.note::before { content:"Note: " }
   .XXX { padding:.5em; border:solid #f00 }
   p.XXX::before { content:"Issue: " }
   dl.switch { padding-left:2em }
   dl.switch > dt { text-indent:-1.5em }
   dl.switch > dt:before { content:'\21AA'; padding:0 0.5em 0 0; display:inline-block; width:1em; text-align:right; line-height:0.5em }
   dl.domintro { color: green; margin: 2em 0 2em 2em; padding: 0.5em 1em; border: none; background: #DDFFDD; }
   dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
   dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
   dl.domintro dd p { margin: 0.5em 0; }
   dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This box is non-normative. Implementation requirements are given below this box.'; color: red; border: solid 2px; background: white; padding: 0 0.25em; }
   em.ct { text-transform:lowercase; font-variant:small-caps; font-style:normal }
   dfn { font-weight:bold; font-style:normal }
   code { color:orangered }
   code :link, code :visited { color:inherit }
   hr:not(.top) { display:block; background:none; border:none; padding:0; margin:2em 0; height:auto }
   table { border-collapse:collapse; border-style:hidden hidden none hidden }
   table thead { border-bottom:solid }
   table tbody th:first-child { border-left:solid }
   table td, table th { border-left:solid; border-right:solid; border-bottom:solid thin; vertical-align:top; padding:0.2em }
   .translation { border: #000 2px dashed; padding: 20px; margin-bottom: 20px; background-color: #ffe; }
  </style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-REC.css" rel="stylesheet" type="text/css">
</head>

<body class="rec">
  <div class="translation">
    <p>Ce document est la traduction en français de la Recommandation du W3C
    portant sur la Mesure des durées de Navigation (17 Décembre 2012).</p>

    <p>Cette recommandation est une version traduite qui peut comporter des
    erreurs. La seule version normative et originale est la version
    anglaise, qui se trouve &agrave; : <a href="http://www.w3.org/TR/navigation-timing/">http://www.w3.org/TR/navigation-timing/</a>.</p>
    <ul>
      <li><b>Adresse</b> : <a href="http://www.w3.org/TR/navigation-timing/">http://www.w3.org/TR/navigation-timing/</a></li>
      <li><b>Traducteur</b> : <a href="http://www.lacot.org/">Xavier Lacot</a> - &lt;xavier [at] lacot.org&gt;</li>
      <li><b>Date de début de traduction</b> : 23 Décembre 2012</li>
      <li><b>Date de fin de traduction</b> : 27 Décembre 2012</li>
      <li><b>Derni&egrave;re mise &agrave; jour</b> : 27 Décembre 2012</li>
    </ul>
  </div>

<div class="head">
<a href="http://www.w3.org/"><img height="48" width="72" alt="W3C" src="http://www.w3.org/Icons/w3c_home"/></a>
<h1>Mesure des durées de Navigation</h1>

<h2 class="no-num no-toc" id="rec-December-17-2012">Recommandation du W3C - 17 Décembre 2012</h2>
<dl>
<dt>Cette version :</dt>
  <dd><a href="http://www.w3.org/TR/2012/REC-navigation-timing-20121217/">http://www.w3.org/TR/2012/REC-navigation-timing-20121217/</a></dd>
  <dt>Dernière version :</dt>
  <dd><a href="http://www.w3.org/TR/navigation-timing/">http://www.w3.org/TR/navigation-timing/</a></dd>
  <dt>Version précédente :</dt>
  <dd><a href="http://www.w3.org/TR/2012/PR-navigation-timing-20120726/">http://www.w3.org/TR/2012/PR-navigation-timing-20120726/</a></dd>
  <dt>Éditeur :</dt>
    <dd class="vcard"><span class="fn">Zhiheng Wang</span> (<span
      class="org">Google Inc.</span>) &lt;<a
      class="email" href="mailto:zhihengw@google.com">zhihengw@google.com</a>&gt; </dd>
</dl>

<p>Veuillez consulter l'<a href='http://www.w3.org/2012/12/navigation-timing-errata.html'><strong>errata</strong></a>
de ce document, qui peut inclure quelques corrections normatives.</p>

<p>Consultez également les <a href='http://www.w3.org/2003/03/Translations/byTechnology?technology=navigation-timing'>tranductions</a>.</p>

   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Droit de copie</a>
    &copy; 2012 <a href="http://www.w3.org/"><abbr title="World Wide Web
    Consortium">W3C</abbr></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute
    of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr title="European Research Consortium
    for Informatics and Mathematics">ERCIM</abbr></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), tous droits réservés. Les règles de <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">responsabilité</a>,
    de <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">nom de marque</a>

    et d'<a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">utilisation de document</a>
    du W3C s'appliquent.</p>

   <hr class='top'>
</div>

<h2 class="no-num no-toc" id="abstract">Résumé</h2>

<p>Cette spécification définit une interface pour les applications Web afin
  d'accéder à des informations de mesure de durée en lien avec la navigation
  et les éléments. </p>

<h2 class="no-num no-toc" id="status-of-this-document">Statut de ce
document</h2>

  <p><em>Ce chapitre décrit le statut de ce document au moment de sa
    publication. D'autres documents pourront remplacer ce document. Une liste
    des publications courantes du W3C et les dernières révisions de ce rapport
    technique peuvent être trouvées dans l'<a href="http://www.w3.org/TR/">index
    des rapports techniques du W3C</a> à l'adresse http://www.w3.org/TR/.</em></p>

<p>Ceci est la Recommandation du W3C pour la "Spécification de Mesure des durées de Navigation". Un <a href="http://www.w3.org/2011/03/navigation-timing-report">rapport d'implémentation</a>, produit au cours de la phase de Recommandation Candidate, en 2012, est disponible. Il s'appuie sur la <a href='http://w3c-test.org/webperf/tests/#navigation_timing'>suite de tests de Mesure des durées de Navigation</a>.</p>

<p>Merci d'envoyer les commentaires
   à <a href="mailto:public-web-perf@w3.org?subject=%5BNavigationTiming%5D%20">public-web-perf@w3.org</a>
   (<a href="http://lists.w3.org/Archives/Public/public-web-perf/">archive</a>)
   avec <samp>[NavigationTiming]</samp> au début de la ligne de sujet.</p>

<p>Ce document est produit par le Groupe de Travail
   <a href="http://www.w3.org/2010/webperf/">Performance Web</a>.
   Un <a href='diff.html'>document des différences</a> avec le brouillon précédent est disponible.</p>

<p>Ce document a été revu par des membres du W3C, par des développeurs de
logiciels, et par d'autres groupes du W3C et les tiers concernés, et a été
approuvé par le Directeur comme Recommandation du W3C. C'est un document
stable qui peut être utilisé comme document de référence ou cité par
un autre document. Le rôle du W3C, en produisant cette recommandation, est
de mettre en lumière la spécification et d'en promouvoir le plus large
déploiement. Ceci permet d'améliorer le fonctionnement et l'interopérabilité
du Web.</p>

<p>Ce document a été produit par un groupe agissant sous couvert de la
   <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">politique de
   brevets du W3C du 5 février 2004</a>. Le W3C maintient une
   <a rel="disclosure"
   href="http://www.w3.org/2004/01/pp-impl/42538/status">liste publique des
   divulgations de brevets</a> faites en lien avec les produits livrables du
   groupe; cette page contient également des instructions pour divulguer un
   brevet. Quiconque aurait connaissance d'un brevet dont il pense qu'il
   contient des <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Revendication(s)
   Essentielle(s)</a> doit divulguer cette information conformément à la
   <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
   6 de la Politique de Brevets du W3C</a>.</p>


<h2 class="no-num no-toc" id="table-of-contents">Contenu</h2>
<!--begin-toc-->
<ol class="toc">
  <li><a href="#introduction"><span class="secno">1
  </span>Introduction</a></li>
  <li><a href="#conformance-requirements"><span class="secno">2
    </span>Exigences de conformité</a></li>
  <li><a href="#terminology"><span class="secno">3 </span>Terminologie</a></li>
  <li><a href="#sec-navigation-timing"><span class="secno">4 </span>Mesure de durées de Navigation</a>
    <ol class="toc">
      <li><a href="#sec-navigation-timing-introduction"><span class="secno">4.1 </span>Introduction</a></li>
      <li><a href="#sec-navigation-timing-interface"><span class="secno">4.2 </span>L'interface <code>PerformanceTiming</code></a></li>
      <li><a href="#sec-navigation-info-interface"><span class="secno">4.3 </span>L'interface <code>PerformanceNavigation</code></a></li>
      <li><a href="#sec-window.performance-attribute"><span class="secno">4.4 </span> L'attribut <code>window.performance</code></a></li>
    </ol>
  </li>
  <li><a href="#process"><span class="secno">5 </span>Traitement</a>
    <ol class="toc">
      <li><a href="#processing-model"><span class="secno">5.1 </span>Modèle de traitement</a></li>
      <li><a href="#garbage-collection"><span class="secno">5.2 </span>Récupération de mémoire</a></li>
      <li><a href="#mono-clock"><span class="secno">5.3 </span>L'Horloge Monotone</a></li>
      <li><a href="#vendor-prefixes"><span class="secno">5.4 </span>Préfixes de fournisseurs</a></li>
    </ol>
  <li><a href="#privacy"><span class="secno">6 </span>Données privées</a>
    <ol class="toc">
      <li><a href="#info_disclosure"><span class="secno">6.1 </span>Divulgation d'informations</a></li>
      <li><a href="#cross-directory"><span class="secno">6.2 </span>Accès inter-dossiers</a></li>
    </ol>
  </li>
  <li><a href="#security"><span class="secno">7 </span>Sécurité</a>
    <ol class="toc">
      <li><a href="#authentication"><span class="secno">7.1 </span>Détection de serveurs proxy</a></li>
      <li><a href="#readonly"><span class="secno">7.2 </span>Falsification en remplaçant les objets de mesure de durée</a></li>
    </ol>
  </li>
  <li><a href="#references"><span class="secno">8 </span>Références</a>
    <ol class="toc">
      <li><a href="#normative-references"><span class="secno">8.1 </span>Références Normatives</a></li>
      <li><a href="#informative-references"><span class="secno">8.2 </span>Références Informatives</a></li>
    </ol>
  </li>
  <li><a class="no-num" href="#acknowledgements">Remerciements</a></li>
</ol>
<!--end-toc-->


<h2 id="introduction"><span class="secno">1 </span>Introduction</h2>

<p>Cette section n'est pas normative.</p>

<p>
La latence utilisateur est un indicateur important de la qualité des
Applications Web. Même si les mécanismes basés sur des scripts, comme ceux décrits dans
<a href="#JSMeasure">[JSMEASURE]</a>, peuvent
constituer une instrumentation complète pour mesurer la latence utilisateur
au sein d'une application, ils sont dans de nombreux cas incapables de fournir
une vision complètement globale de la latence.
</p>

<div class="example">
<p>Par exemple, le script suivant montre une tentative naïve pour
mesurer le temps pris pour charger entièrement une page :</p>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;

var start = new Date().getTime();
function onLoad() {
  var now = new Date().getTime();
  var latency = now - start;
  alert("temps de chargement de la page : " + latency);
}

&lt;/script&gt;
&lt;/head&gt;
&lt;body onload="onLoad()"&gt;
&lt;!- Le corps de la page commence ici. --&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>

<p>Ce script calcule la durée écoulée pour charger la page <b>après</b> que
le premier bit de JavaScript dans la section head est exécuté, mais il ne
donne aucune information au sujet de la durée pour recevoir la page du serveur. </p>

<p>Afin de répondre au besoin d'une information complète au sujet de
l'expérience utilisateur, ce document introduit les interfaces
<a href="#performancetiming"><code>PerformanceTiming</code></a>. Cette interface
permet aux mécanismes JavaScript de fournir au sein des applications des
mesures de latence complètes et effectuées côté client. Avec l'interface
proposée, l'exemple précédent peut être modifié afin de mesurer le temps de
chargement de la page tel que perçu par l'utilisateur. </p>

<div class="example">
<p>Le script suivant calcule la durée nécessaire au chargement de la page
depuis l'action de navigation la plus récente.</p>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
function onLoad() {
  var now = new Date().getTime();
  var page_load_time = now - performance.timing.navigationStart;
  alert("Temps de chargement de la page perçu par l'utilisateur: " + page_load_time);
}

&lt;/script&gt;
&lt;/head&gt;
&lt;body onload="onLoad()"&gt;
&lt;!- Le corps de la page commence ici. --&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>

<p>L'interface fournie par ce travail n'est pas conçue dans l'objectif d'être
utilisée comme un quelconque type de suite de test pour agents utilisateurs.</p>

<h2 id="conformance-requirements"><span class="secno">2 </span>Exigences de
conformité</h2>

<p>Tous les diagrammes, exemples, et notes dans cette specification sont non-normatifs,
de même que toutes les sections explicitement marquées comme non-normatives.
Tout le reste dans cette spécification est normatif. </p>

<p>Les mots-clés « DOI(VEN)T », « NE DOI(VEN)T PAS », « REQUIS », « DEVRAIT »,
« NE DEVRAIT PAS », « RECOMMANDÉ », « PEUT » et « OPTIONNEL » dans les parties
normatives de ce document doivent s'interpréter comme décrit dans le
document <a href="#rfc2119">RFC 2119</a>. Pour des raisons de lisibilité, ces
mots n'apparaissent pas intégralement en lettres majuscules dans cette spécification.</p>

<p>Les exigences formulées à l'impératif dans le cadre d'algorithmes (comme
"retirer tout caractère blanc en début de chaîne" ou "retourner faux et annuler
ces étapes") doivent être interprétées selon la signification du mot-clé utilisé
dans l'introduction de l'algorithme ("doit", "devrait", "peut", etc.). </p>

<p>Certaines exigences de conformité sont rédigées comme des exigences sur les
attributs, les méthodes ou les objets. De telles exigences doivent être interprétées
comme des exigences portant sur les agents utilisateurs. </p>

<p>Les exigences de conformité formulées sous forme d'algorithmes ou d'étapes
spécifiques peuvent être mises en œuvre de quelque manière que ce soit, pourvu
que le résultat final est équivalent. (En particulier, les algorithmes définis
dans cette spécification sont destinés à être faciles à suivre, et ne sont pas
destinés à être performants.)</p>

    <p>Les fragments IDL dans cette spécification doivent être interprétés
      comme nécessaires pour des fragments IDL conformes, tel que décrit
      dans la spécification Web IDL. <a href="#WebIDL">[Web IDL]</a></p>

<h2 id="terminology"><span class="secno">3 </span>Terminologie</h2>

<p>La formule "un objet <code title="">Foo</code>", dans laquelle <code
title="">Foo</code> est en fait une interface, est parfois utilisée à la place
de l'expression plus exacte "un objet qui implémente l'interface <code
title="">Foo</code>". </p>

<p>Le terme "navigation" fait référence au fait de
<a href="http://www.w3.org/TR/html5/browsers.html#navigate">naviguer</a>.</p>

<p>Le terme "JavaScript" étant plus largement connu, il est utilisé à la place
du terme officiel ECMAScript pour faire référence à
l'<a href="#ECMA262">ECMA-262</a>.</p>

<p>Tout au long de ce travail, le temps est mesuré en millisecondes
depuis minuit du 1<sup>er</sup> Janvier 1970 (UTC). Veuillez noter que la spécifiation de Mesure de Durée de Navigation 2 <a href='#NavigationTiming2'>[Navigation Timing 2]</a>
donne accès aux informations de mesure de durée liées à la navigation en proposant plutôt
une résolution infèrieure à la milliseconde.</p>

<h2 id="sec-navigation-timing"><span class="secno">4 </span>Mesure de durées de Navigation</h2>

<h3 id="sec-navigation-timing-introduction"><span class="secno">4.1 </span>Introduction</h3>

<p>Cette section n'est pas normative.</p>

<p>Cette spécification introduit une interface qui fournit aux applications Web
des informations en lien avec la mesure de durées. Cette spécification ne
couvre pas la manière dont les applications Web tirent partie de ces
interfaces afin de collecter, stocker et analyser les informations fournies. </p>

<h3 id="sec-navigation-timing-interface"><span class="secno">4.2 </span>L'interface <code>PerformanceTiming</code></h3>
<pre class="idl">interface <dfn id="performancetiming">PerformanceTiming</dfn> {
  readonly attribute unsigned long long <a href="#dom-performancetiming-navigationstart" title="navigationstart">navigationStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-unloadeventstart" title="unloadeventstart">unloadEventStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-unloadeventend" title="unloadeventend">unloadEventEnd</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-redirectstart" title="redirectstart">redirectStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-redirectend" title="redirectend">redirectEnd</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-fetchstart" title="fetchstart">fetchStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-domainlookupstart" title="domainlookupstart">domainLookupStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-domainlookupend" title="domainlookupend">domainLookupEnd</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-connectstart" title="connectstart">connectStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-connectend" title="connectend">connectEnd</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-secureconnectstart" title="secureconnectstart">secureConnectionStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-requeststart" title="requeststart">requestStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-responsestart" title="responsestart">responseStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-responseend" title="responseend">responseEnd</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-domloading" title="domloading">domLoading</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-dominteractive" title="dominteractive">domInteractive</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-domcontenteventstart" title="domcontenteventstart">domContentLoadedEventStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-domcontenteventend" title="domcontenteventend">domContentLoadedEventEnd</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-domcomplete" title="domcomplete">domComplete</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-loadstart" title="loadeventstart">loadEventStart</a>;
  readonly attribute unsigned long long <a href="#dom-performancetiming-loadend" title="loadeventend">loadEventEnd</a>;
};</pre>

<h4>Attribut <code><dfn id="dom-performancetiming-navigationstart">navigationStart</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement après que l'agent
utilisateur a fini d'<a
href="http://www.w3.org/TR/html5/browsers.html#prompt-to-unload-a-document">inviter
à décharger</a> le document précédent. S'il n'y a pas de document précédent, cet
attribut doit retourner la même valeur que <a href="#dom-performancetiming-fetchstart">fetchStart</a>.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-unloadeventstart">unloadEventStart</dfn></code></h4>

<p>Si le document précédent et le document courant ont la même
<a href="http://tools.ietf.org/html/rfc6454">origine</a>
[<a href='#rfc6454'>IETF RFC 6454</a>],
cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
ne démarre l'événement
<a href="http://www.w3.org/TR/html5/browsers.html#unloading-documents">unload</a>
du document précédent.

S'il n' y a pas de document précédent ou si le document précédent a une autre
<a href="http://tools.ietf.org/html/rfc6454">origine</a> que le
document courant, cet attribut doit retourner zéro.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-unloadeventend">unloadEventEnd</dfn></code></h4>

<p>Si le document précédent et le document courant ont la
même <a href="http://tools.ietf.org/html/rfc6454">origine</a>,
cet attribut doit retourner l'heure immédiatement après que l'agent utilisateur
a terminé l'événement
<a href="http://www.w3.org/TR/html5/browsers.html#unload-a-document">unload</a>
du document précédent. S'il n' y a pas de document précédent ou si le document
précédent a une autre
<a href="http://tools.ietf.org/html/rfc6454">origine</a> que le
document courant ou si le déchargement n'est pas encore achevé, cet attribut
doit retourner zéro.</p>

<p>S'il y a des redirections HTTP
<a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes">ou équivalentes</a>
lors de la navigation et qu'elles n'ont pas toutes la
même <a href="http://tools.ietf.org/html/rfc6454">origine</a>,
<a href="#dom-performancetiming-unloadeventstart">unloadEventStart</a> et
<a href="#dom-performancetiming-unloadeventend">unloadEventEnd</a> doivent tous deux retourner zéro.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-redirectstart">redirectStart</dfn></code></h4>

<p>S'il y a des redirections HTTP
<a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes">ou équivalentes</a>
lors de la navigation et qu'elles ont toutes la
même <a href="http://tools.ietf.org/html/rfc6454">origine</a>,
cet attribut doit retourner l'<a href="#dom-performancetiming-fetchstart">heure de début de la
requête</a> qui initie la redirection. Sinon, l'attribut doit retourner zéro.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-redirectend">redirectEnd</dfn></code></h4>

<p>S'il y a des redirections HTTP
<a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes">ou équivalentes</a>
lors de la navigation et qu'elles ont toutes la
même <a href="http://tools.ietf.org/html/rfc6454">origine</a>,
cet attribut doit retourner l'heure immédiatement après avoir reçu le dernier
octet de la réponse de la dernière redirection. Sinon, l'attribut doit retourner zéro.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-fetchstart">fetchStart</dfn></code></h4>

<p>Si la nouvelle ressource doit être
<a href="http://www.w3.org/TR/html5/infrastructure.html#fetching-resources">récupérée</a> en utilisant la méthode HTTP GET
<a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-get">ou
un équivalent</a>, fetchStart doit retourner l'heure immédiatement avant que
l'agent utilisateur ait commencé à vérifier <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">
tout cache applicatif pertinent</a>. Sinon, fetchStart doit retourner l'heure à laquelle
l'agent utilisateur commence à
<a href="http://www.w3.org/TR/html5/infrastructure.html#fetching-resources">récupérer</a> la ressource.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-domainlookupstart">domainLookupStart</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
commence la recherche du nom de domaine pour le document courant.
Si une <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1">connexion persistante</a> [<a href='#rfc2616'>RFC 2616</a>] est utilisée, ou si le document
courant est extrait de <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">caches
applicatifs pertinents</a> ou de ressources locales,
cet attribut doit retourner la même valeur que <a href="#dom-performancetiming-fetchstart">fetchStart</a>. </p>

<h4>Attribut <code><dfn id="dom-performancetiming-domainlookupend">domainLookupEnd</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement après que l'agent utilisateur
a terminé la recherche du nom de domaine pour le document courant.
Si une <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1">connexion
persistante</a> [<a href='#rfc2616'>RFC 2616</a>] est utilisée, ou si le document
courant est extrait de <a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">caches
applicatifs pertinents</a> ou de ressources locales,
cet attribut doit retourner la même valeur que <a href="#dom-performancetiming-fetchstart">fetchStart</a>. </p>

<div class="example">
<p>Cette section n'est pas normative.</p>
<p>Vérifier et récupérer le contenu du
<p>Checking and retrieving contents from the
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13">cache HTTP</a> [<a href='#rfc2616'>RFC 2616</a>]
fait partie du <a href="http://www.w3.org/TR/html5/infrastructure.html#fetching-resources">
processus de chargement</a>. Ce processus est couvert par les attributs
<a href="#dom-performancetiming-requeststart">requestStart</a>,
<a href="#dom-performancetiming-responsestart">responseStart</a> et
<a href="#dom-performancetiming-responseend">responseEnd</a>.</p>
</div>
<div class="example">

<div class="exampleHeader">
Exemple</div>

<p>Dans le cas où l'agent utilisateur a déjà les informations du domaine en cache,
domainLookupStart et domainLookupEnd représentent les moments auxquels l'agent utilisateur
commence et termine la récupération de données liées au domaine depuis le cache. </p>

</div>

<h4>Attribut <code><dfn id="dom-performancetiming-connectstart">connectStart</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
commence à établir la connexion au serveur pour récupérer le document.
Si une <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1">connexion
persistante</a> [<a href='#rfc2616'>RFC 2616</a>] est utilisée, ou si le document est extrait de <a
href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">caches
applicatifs pertinents</a> ou de ressources locales,
cet attribut doit retourner la valeur de <a href="#dom-performancetiming-domainlookupend">domainLookupEnd</a>.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-connectend">connectEnd</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement après que l'agent utilisateur
a terminé d'établir la connexion au serveur pour récupérer le document courant.
Si une <a
href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1">connexion
persistante</a> [<a href='#rfc2616'>RFC 2616</a>] est utilisée, ou si le document courant est extrait de <a
href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">caches
applicatifs pertinents</a> ou de ressources locales,
cet attribut doit retourner la valeur de <a href="#dom-performancetiming-domainlookupend">domainLookupEnd</a>
</p>

<p>Si la connexion de transport échoue et que l'agent utilisateur réouvre une connexion,
<a href="#dom-performancetiming-connectstart">connectStart</a> et
<a href="#dom-performancetiming-connectend">connectEnd</a> devraient retourner les valeurs
correspondantes pour la nouvelle connexion. </p>
<p>
<a href="#dom-performancetiming-connectend">connectEnd</a> doit inclure l'intervalle de temps
pour établir la connexion de transport ainsi que d'autres intervalles de temps,
tels que le dialogue SSL et l'authentification SOCKS.
</p>

<h4>Attribut <code><dfn id="dom-performancetiming-secureconnectstart">secureConnectionStart</dfn></code></h4>

<p>Cet attribut est optionnel. Les agents utilisateurs qui ne proposent pas cet
attribut doivent le fixer à undefined. Lorsque cet attribut est disponible, si le
<a href="http://www.w3.org/TR/html5/infrastructure.html#url-scheme">schéma</a> de la page
courante est <a href="http://tools.ietf.org/html/rfc2817">HTTPS</a>, cet
attribut doit retourner l'heure immédiatement avant que l'agent utilisateur commence
le processus de dialogue pour sécuriser la connexion courante. Si cet attribut est
disponible mais que HTTPS n'est pas utilisé, cet attribut doit retourner zéro.
</p>

<h4>Attribut <code><dfn id="dom-performancetiming-requeststart">requestStart</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
ne commence à demander le document courant au serveur, ou de
<a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">
caches applicatifs pertinents</a> ou de ressources locales.</p>

<p>Si la connexion de transport échoue après que la requête a été envoyée, et
que l'agent utilisateur réouvre une connexion et renvoie la requête, <a
href="#dom-performancetiming-requeststart">requestStart</a> devrait retourner les valeurs
correspondantes pour la nouvelle requête.</p>

<div class="note">
<p>Cette interface n'inclut pas d'attribut pour représenter la fin de l'envoi
d'une requête, par exemple requestEnd.
<ul>
<li>La fin de l'envoi de la requête par l'agent utilisateur n'indique pas toujours
la date correspondate de complétion sur le transport réseau, ce qui serait l'objectif
principal d'un tel attribut.</li>
<li>Certains agents utilisateur ne peuvent que difficilement déterminer la
durée réelle d'achèvement de l'envoi de la requête, en raison de
l'encapsulation au sein de la couche HTTP.</li>
</ul>
</div>

<h4>Attribut <code><dfn id="dom-performancetiming-responsestart">responseStart</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement après que l'agent utilisateur
a reçu le premier octet de la réponse du serveur, ou des
<a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">caches
applicatifs pertinents</a> ou de ressources locales. </p>

<h4>Attribut <code><dfn id="dom-performancetiming-responseend">responseEnd</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement après que l'agent utilisateur
a reçu le dernier octet du document courant ou immédiatement avant que la
connexion de transport ne soit fermée, suivant ce qui arrive en premier. Le
document dans ce cas peut être reçu soit du serveur, soit des
<a href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">caches
applicatifs pertinents</a> ou de ressources locales.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-domloading">domLoading</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
ne fixe l'<a href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état
de préparation du document courant</a> à
<a href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">"loading"</a>.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-dominteractive">domInteractive</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
ne fixe l'<a href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état
de préparation du document courant</a> à
<a href="http://www.w3.org/TR/html5/syntax.html#the-end">"interactive"</a>.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-domcontenteventstart">domContentLoadedEventStart</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
n'émette <a
href="http://www.w3.org/TR/html5/syntax.html#the-end">l'évènement DOMContentLoaded</a> sur le <a href="http://www.w3.org/TR/html5/dom.html#document"><code>Document</code></a>.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-domcontenteventend">domContentLoadedEventEnd</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement après que l'<a
href="http://www.w3.org/TR/html5/syntax.html#the-end">évènement DOMContentLoaded</a>
du document a pris fin.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-domcomplete">domComplete</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'agent utilisateur
ne fixe l'<a href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état
de préparation du document courant</a> à
<a href="http://www.w3.org/TR/html5/syntax.html#the-end">"complete"</a>.</p>

<p>Si l'<a href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état
de préparation du document courant</a> change plusieurs fois vers le même état,
<a href="#dom-performancetiming-domloading">domLoading</a>,
<a href="#dom-performancetiming-dominteractive">domInteractive</a>,
<a href="#dom-performancetiming-domcontenteventstart">domContentLoadedEventStart</a>,
<a href="#dom-performancetiming-domcontenteventend">domContentLoadedEventEnd</a> et
<a href="#dom-performancetiming-domcomplete">domComplete</a> doivent retourner l'heure de la première
occurrence du changement de l'
<a href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état de préparation du document</a>
correspondant.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-loadstart">loadEventStart</dfn></code></h4>

<p>Cet attribut doit retourner l'heure immédiatement avant que l'évènement
load du document courant a été émis. Il doit retourner zéro tant que
l'évènement load n'a pas encore été émis.</p>

<h4>Attribut <code><dfn id="dom-performancetiming-loadend">loadEventEnd</dfn></code></h4>

<p>Cet attribut doit retourner l'heure lorsque l'évènement
load du document courant est terminé. Il doit retourner zéro tant que
l'évènement load n'a pas été émis ou n'est pas terminé.</p>

<h3 id="sec-navigation-info-interface"><span class="secno">4.3 </span>L'interface
<code><a href="#performancenavigation">PerformanceNavigation</a></code></h3>
<pre class="idl">interface <dfn id="performancenavigation">PerformanceNavigation</dfn> {
  const unsigned short <a href="#dom-performancenavigation-typenavigate">TYPE_NAVIGATE</a> = 0;
  const unsigned short <a href="#dom-performancenavigation-typereload">TYPE_RELOAD</a> = 1;
  const unsigned short <a href="#dom-performancenavigation-typebackforward">TYPE_BACK_FORWARD</a> = 2;
  const unsigned short <a href="#dom-performancenavigation-typereserved">TYPE_RESERVED</a> = 255;
  readonly attribute unsigned short <a href="#dom-performancenavigation-type" title="navigationtype">type</a>;
  readonly attribute unsigned short <a href="#dom-performancenavigation-redirectcount" title="redirectcount">redirectCount</a>;
};</pre>

<h4>Attribut <code><dfn id="dom-performancenavigation-type">type</dfn></code></h4>

<p>Cet attribut doit retourner le type de la dernière action de <a
href="http://www.w3.org/TR/html5/browsers.html#navigate">navigation</a> qui n'est pas une redirection,
dans le contexte courant de navigation. Il doit avoir une des valeurs de <a
href="#dom-performancenavigation-type">type de navigation</a> suivantes. </p>
<dl>
  <dt><dfn id="dom-performancenavigation-typenavigate">TYPE_NAVIGATE</dfn></dt>
    <dd><p>La navigation a commencé en cliquant sur un lien, ou en entrant l'URL dans la barre
    d'addresses de l'agent utilisateur, ou en soumettant un formulaire, ou elle a été initiée par une opération scriptée autre que
    celles utilisées par <a href="#dom-performancenavigation-typenavigate">TYPE_RELOAD</a>
    et <a href="#dom-performancenavigation-typebackforward">TYPE_BACK_FORWARD</a> comme indiqué ci-dessous.</p></dd>
  <dt><dfn id="dom-performancenavigation-typereload">TYPE_RELOAD</dfn></dt>
    <dd><p>Navigation par le biais
    d'une opération de rechargement ou par la méthode
    <a href="http://www.w3.org/TR/html5/browsers.html#dom-location-reload">location.reload()</a>.</p></dd>
  <dt><dfn id="dom-performancenavigation-typebackforward">TYPE_BACK_FORWARD</dfn></dt>
   <dd><p>Navigation
  par le biais d'une opération de <a href="http://www.w3.org/TR/html5/browsers.html#traverse-the-history">traversée d'historique</a>.</p></dd>
  <dt><dfn id="dom-performancenavigation-typereserved">TYPE_RESERVED</dfn></dt>
  <dd><p>Tous les autres types de navigation
  non définis par les valeurs ci-dessus.</p></dd>
</dl>

<div class="note">
<p>Les redirections côté client, comme celles utilisant <a href="http://www.w3.org/TR/html5/document-metadata.html#attr-meta-http-equiv-refresh">la directive pragma Refresh</a>,
ne sont pas considérées comme des redirections HTTP <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes">ou un équivalent</a> par cette spécification.
Dans ces cas, l'attribut <a href="#dom-performancenavigation-type">type</a> devrait retourner la valeur appropriée,
comme <a href="#dom-performancenavigation-typenavigate">TYPE_RELOAD</a> si la page courante est rechargée, ou
<a href="#dom-performancenavigation-typenavigate">TYPE_NAVIGATE</a> si la navigation est effectuée vers une autre URL.</p>
</div>

<h4>Attribut <code><dfn id="dom-performancenavigation-redirectcount">redirectCount</dfn></code></h4>

<p>Cet attribut doit retourner le nombre de redirections depuis la dernière
action de navigation dans le contexte de navigation courant et qui ne soit
pas une redirection. S'il n'y a pas de redirection, ou s'il n'y a aucune redirection
qui n'est pas de la même
<a href="http://tools.ietf.org/html/rfc6454">
origine</a> que le document de destination, cet attribut doit retourner zéro. </p>


<h3 id="sec-window.performance-attribute"><span class="secno">4.4 </span> L'attribut <code><a href="#dom-window-performance">window.performance</a> </code></h3>
<p>
La spécification HTML5 définit une interface <a href="http://www.w3.org/TR/html5/browsers.html#window">Window</a> <a href='#HTML5'>[HTML5]</a>, que cette spécification
étend.
</p>

<pre class="idl">interface <dfn id="performance">Performance</dfn> {
  readonly attribute <a href="#performancetiming">PerformanceTiming</a> <dfn id="dom-performance-timing">timing</dfn>;
  readonly attribute <a href="#performancenavigation">PerformanceNavigation</a> <dfn id="dom-performance-navigation">navigation</dfn>;
};

partial interface Window {
  [Replaceable] readonly attribute <a href="#performance">Performance</a> <dfn id="dom-window-performance">performance</dfn>;
};</pre>

<p>
L'attribut <a href="#dom-window-performance">window.performance</a> fournit
un espace de stockage pour les attributs liés à la performance.
</p>

<h4 id="performance-timing-attribute">Attribut <code>timing</code></h4>
<p>
	L'attribut <code>timing</code>
	représente les informations de mesure de temps liées aux contextes de navigation
depuis la dernière action de navigation qui ne soit pas une redirection. Cet attribut est définit par l'interface <a href="#sec-navigation-timing-interface">PerformanceTiming</a>.
</p>

<h4 id="performance-navigation-attribute">Attribut <code>navigation</code></h4>
<p>
	L'attribut <code>navigation</code> est définit par l'interface <a href="#performancenavigation"><code>PerformanceNavigation</code></a>.
<p>

<h2 id="process"><span class="secno">5 </span>Traitement</h2>

<h3 id="processing-model"><span class="secno">5.1 </span>Modèle de traitement</h3>

<p class="note">Tous les attributs de window.performance.timing et
window.performance.navigation ne devraient pas être écrits avant que <a
href="http://www.w3.org/TR/html5/browsers.html#create-a-document-object">l'objet
Window du document courant ne soit créé</a>, même s'il est fait référence à
leurs attributs dans les étapes suivantes, afin de faciliter la description.</p>

<p class="note">Les agents utilisateurs peuvent permettre aux utilisateurs la possibilité de désactiver
les interfaces window.performance.timing et window.performance.navigation.
Lorsque ces interfaces sont désactivées, window.performance.timing et
window.performance.navigation doivent retourner une valeur nulle.</p>

<div class="example">
<div class="exampleHeader">
Exemple</div>
<p>Un agent utilisateur peut maintenir des instances des interfaces PerformanceTiming et
PerformanceNavigation jusqu'à ce que l'objet Window associé au document courant soit
créé, moment auquel window.performance.timing et
window.performance.navigation sont remplacés par ces instances.</p>
</div>

<div class="example">
<div class="exampleHeader">Illustration</div>
<p>Cette section n'est pas normative.</p>
<p>Le graphe suivant illustrate les attributs de mesure de durée définis par l'interface
<a href="#performancetiming"><code>PerformanceTiming</code></a> et l'interface
<a href="#performancenavigation"><code>PerformanceNavigation</code></a>, respectivement
avec ou sans redirection. Les attributs soulignés peuvent ne pas être disponibles
lors d'une navigation impliquant des documents d'<a href="http://tools.ietf.org/html/rfc6454">origines</a> différentes. Les
agents utilisateurs peuvent effectuer des traitements internes entre des mesures,
ce qui permet des intervalles non-normatifs entre les mesures de durée.</p>
<p><img style='width: 85%' src="timing-overview.png" alt='Attributs de mesure de durée'></p>
</div>

<ol>
  <li>Si la <a href="http://www.w3.org/TR/html5/browsers.html#navigate">navigation</a>
    est annulée pour une quelconque des raisons suivantes, annulez
    ces étapes sans modifier les attributs de window.performance.timing
    et window.performance.navigation.
    <ol style="list-style-type:lower-alpha;">
      <li>La navigation est annulée en raison du
        <a href="http://www.w3.org/TR/html5/browsers.html#sandboxed-navigation-browsing-context-flag">marqueur de
        contexte de navigation cloisonnée</a> ou du
        <a href="http://www.w3.org/TR/html5/browsers.html#sandboxed-top-level-navigation-browsing-context-flag">marqueur de
        contexte de navigation de haut niveau cloisonnée</a>, ou une tentative antérieure
        de naviguer dans le <a href="http://www.w3.org/TR/html5/browsers.html#browsing-context">contexte de navigation</a>.</li>
      <li>La navigation est causée par des <a
        href="http://www.w3.org/TR/html5/browsers.html#navigate-fragid-step"><em>identifiants
        de fragments</em></a> au sein de la page.</li>
      <li>La nouvelle ressource va être manipulée par un quelconque contenu en ligne.</li>
      <li>La nouvelle ressource va être manipulée par un mécanisme qui ne modifie
        pas le contexte du navigateur.</li>
      <li>L'utilisateur <a
        href="http://www.w3.org/TR/html5/browsers.html#refused-to-allow-the-document-to-be-unloaded">refuse
        d'autoriser que le document soit déchargé</a>.</li>
    </ol>
  </li>
  <li>Immédiatement après que l'agent utilisateur a <a
    href="http://www.w3.org/TR/html5/browsers.html#prompt-to-unload-a-document">demandé
    à décharger</a> le <a
    href="http://www.w3.org/TR/html5/dom.html#document">document</a> précédent,
    sauvez l'heure courante en tant que <a
    href="#dom-performancetiming-navigationstart">navigationStart</a>.</li>
  <li> Sauvez le type de navigation courant dans <a href="#dom-performancenavigation-type">window.performance.navigation.type</a>
    si cela n'a pas été affecté :
    <ol style="list-style-type:lower-alpha;">
    <li>Si la navigation a été démarrée par un clic sur un lien, ou en saisissant l'URL dans la barre d'adresse
        de l'agent utilisateur, ou par soumission de formulaire, ou initiée par une opération scriptée autre que la méthode
        <a href="http://www.w3.org/TR/html5/browsers.html#dom-location-reload">location.reload()</a>,
        le type de navigation est <a href="#dom-performancenavigation-typenavigate">TYPE_NAVIGATE</a>.</li>
    <li>Si la navigation a été démarrée soit en tant que résultat d'une
        <a href="http://www.w3.org/TR/html5/document-metadata.html#attr-meta-http-equiv-refresh">meta refresh</a>,
        ou d'une méthode <a href="http://www.w3.org/TR/html5/browsers.html#dom-location-reload">location.reload()</a>,
        ou d'autres actions équivalentes, le type de navigation est
        <a href="#dom-performancenavigation-typereload">TYPE_RELOAD</a>.</li>
    <li>Si la navigation a été démarrée en tant que résultat d'une
        <a href="http://www.w3.org/TR/html5/browsers.html#traverse-the-history">traversée d'hsitorique</a>,
        le type de navigation est <a href="#dom-performancenavigation-typebackforward">TYPE_BACK_FORWARD</a>.</li>
    <li>Sinon, le type de navigation est <a href="#dom-performancenavigation-typenavigate">TYPE_RESERVED</a>.</li>
    </ol>
  </li>
  <li>Si le document courant et le document précédent sont d'<a href="http://tools.ietf.org/html/rfc6454">origines</a> différentes,
    assignez la valeur 0 à <a href="#dom-performancetiming-unloadeventend">unloadEventStart</a> et
    <a href="#dom-performancetiming-unloadeventend">unloadEventEnd</a>, puis allez à l'étape
    <a href="#step-fetch-start">6</a>. Sinon, enregistrez <a href="#dom-performancetiming-unloadeventend">unloadEventStart</a>
    comme l'heure précédent immédiatement l'évènement unload.</li>
  <li>Immédiatement après que l'évènement unload est achevé,
    enregistrez l'heure actuelle dans <a href="#dom-performancetiming-unloadeventend">unloadEventEnd</a>.</li>
  <li id="step-fetch-start">Si la nouvelle ressource doit être récupérée en utilisant HTTP GET
    <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-get">ou un équivalent</a>, enregistrez l'heure actuelle dans
    <a href="#dom-performancetiming-fetchstart">fetchStart</a>
    immédiatement avant qu'un agent utilisateur vérifie les <a
    href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">
    caches applicatifs pertinents</a>. Sinon, immédiatement avant qu'un agent utilisateur démarre
    <a href="http://www.w3.org/TR/html5/infrastructure.html#fetching-resources">
    le processus de récupération</a>, enregistrez l'heure actuelle dans <a href="#dom-performancetiming-fetchstart">fetchStart</a>.</li>
  <li><a href="#dom-performancetiming-domainlookupstart">domainLookupStart</a>, <a
    href="#dom-performancetiming-domainlookupend">domainLookupEnd</a>, <a
    href="#dom-performancetiming-connectstart">connectStart</a> et <a
    href="#dom-performancetiming-connectend">connectEnd</a> ont la même valeur que <a
    href="#dom-performancetiming-fetchstart">fetchStart</a>.</li>
  <li>Si la ressource est récupérée depuis les <a
    href="http://www.w3.org/TR/html5/browsers.html#relevant-application-cache">caches applicatifs pertinents</a> ou des ressources locales, incluant le
    <a href="http://www.ietf.org/rfc/rfc2616.txt">cache HTTP</a>,
    aller à l'étape <a href="#step-request-start">13</a>.</li>
  <li>Si aucune recherche de nom de domaine n'est nécessaire, aller à l'étape <a
    href="#step-connect-start">11</a>. Sinon, immediatement avant qu'un agent utilisateur commence la recherche de nom de domaine, enregistrer l'heure dans
    <a href="#dom-performancetiming-domainlookupstart">domainLookupStart</a>. </li>
  <li>Enregistrer l'heure dans <a href="#dom-performancetiming-domainlookupend">domainLookupEnd</a>
    immediatement après que la recherche de nom de domaine est effectuée avec succès. Un agent utilisateur peut nécessiter plusieurs essais avant que ce soit le cas. Si la recherche de nom de domaine échoue, annuler la suite des étapes. </li>
  <li id="step-connect-start">Si une connexion de transport persistante est utilisée pour
    récupérer la ressource, <a href="#dom-performancetiming-connectstart">connectStart</a> et
    <a href="#dom-performancetiming-connectend">connectEnd</a> ont la même valeur que
    <a href="#dom-performancetiming-domainlookupend">domainLookupEnd</a>.
    Sinon, enregistrez l'heure dans <a
    href="#dom-performancetiming-connectstart">connectStart</a> immédiatement avant d'initier la connexion au serveur, et sauver l'heure dans
    <a href="#dom-performancetiming-connectend">connectEnd</a> immédiatement
    après que le connexion au serveur ou au proxy est établie. Un agent utilisateur peut nécessiter plusieurs essais avant cet instant. Si une connexion ne peut pas être établie, annuler la suite des étapes. </li>
  <li>À l'étape <a href="#step-connect-start">11</a>, un agent utilisateur devrait également effectuer ces étapes additionnelles s'il supporte l'attribut
    <a href="#dom-performancetiming-secureconnectstart">secureConnectionStart</a> :
    <ol>
    <li>Si le schéma du document courant est HTTPS, l'agent utilisateur doit
        enregistrer l'heure dans <a href="#dom-performancetiming-secureconnectstart">secureConnectionStart</a>
        immédiatement avant le processus de dialogue pour sécuriser la connexion.</li>
    <li>Si le schéma du document courant n'est pas HTTPS, l'agent utilisateur doit
        fixer la valeur de <a href="#dom-performancetiming-secureconnectstart">secureConnectionStart</a> à 0.</li>
    </ol></li>
  <li id="step-request-start">Immédiatement avant que l'agent utilisateur commence à envoyer la requête pour le document, enregistrer l'heure actuelle dans <a
    href="#dom-performancetiming-requeststart">requestStart</a>.</li>
  <li id="step-response-start">Enregistrer l'heure dans <a href="#dom-performancetiming-responsestart">
    responseStart</a> immédiatement après que l'agent utilisateur reçoit le premier octet
    de la réponse.</li>
  <li id="step-response-end">Enregistrer l'heure dans <a
    href="#dom-performancetiming-responseend">responseEnd</a> immédiatement après avoir reçu le
    dernier octet de la réponse.
    <p>Retourner à l'étape <a href="#step-connect-start">11</a> si l'agent utilisateur
    échoue à envoyer la requête ou à recevoir la réponse en entier, et nécessite de re-ouvrir la connexion.</p>

    <div class="example">
    <div class="exampleHeader">Exemple</div>
    <p>Lorsque la <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1">connexion
    persistante</a> [<a href='#rfc2616'>RFC 2616</a>] est activée, un agent utilisateur peut en premier lieu essayer de réutiliser une connection ouverte pour envoyer la requête alors que la connexion peut être <a
    href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4">fermée de manière asynchrone</a>. Dans un tel cas, connectStart, connectEnd et requestStart devraient représenter des informations de mesure de durée collectées sur la connexion ré-ouverte. </p>
    </div>
  </li>
  <li>Si la récupération de la ressource mène à une redirection HTTP
    <a href="http://www.w3.org/TR/html5/infrastructure.html#concept-http-equivalent-codes">ou à un équivalent</a>,
    alors
    <ol style="list-style-type:lower-alpha;">
      <li>si le document courant et le document vers lequel la redirection est effectuée ne sont pas de la
        même <a href="http://tools.ietf.org/html/rfc6454">origine</a>,
        fixer la valeur de <a href="#dom-performancetiming-redirectstart">redirectStart</a>,
        <a href="#dom-performancetiming-redirectend">redirectEnd</a>,
        <a href="#dom-performancetiming-unloadeventstart">unloadEventStart</a>,
        <a href="#dom-performancetiming-unloadeventend">unloadEventEnd</a> et
        <a href="#dom-performancenavigation-redirectcount">redirectCount</a> à 0. Puis
        retourner à l'étape <a href="#step-fetch-start">6</a> avec la nouvelle ressource.</li>
      <li>s'il y a des redirections précédentes impliquant des documents qui ne sont pas de la
        même <a href="http://tools.ietf.org/html/rfc6454">origine</a>,
        fixer la valeur de <a href="#dom-performancetiming-redirectstart">redirectStart</a>,
        <a href="#dom-performancetiming-redirectend">redirectEnd</a>,
        <a href="#dom-performancetiming-unloadeventstart">unloadEventStart</a>,
        <a href="#dom-performancetiming-unloadeventend">unloadEventStart</a> et
        <a href="#dom-performancenavigation-redirectcount">redirectCount</a> à 0. Puis
        retourner à l'étape <a href="#step-fetch-start">6</a> avec la nouvelle ressource.</li>
      <li>Incrémenter <a href="#dom-performancenavigation-redirectcount">redirectCount</a> de 1.</li>
      <li>Si la valeur de <a href="#dom-performancetiming-redirectstart">redirectStart</a> est 0,
        lui associer la valeur de <a href="#dom-performancetiming-fetchstart">fetchStart</a>.</li>
      <li>Donner à <a href="#dom-performancetiming-redirectend">redirectEnd</a> la valeur de
        <a href="#dom-performancetiming-responseend">responseEnd</a>.</li>
      <li>Fixer tous les attributs de window.performance.timing à 0 sauf
        <a href="#dom-performancetiming-navigationstart">navigationStart</a>,
        <a href="#dom-performancetiming-redirectstart">redirectStart</a>,
        <a href="#dom-performancetiming-redirectend">redirectEnd</a>,
        <a href="#dom-performancetiming-unloadeventstart">unloadEventStart</a> et
        <a href="#dom-performancetiming-unloadeventend">unloadEventEnd</a>.</li>
      <li>Retourner à l'étape <a href="#step-fetch-start">6</a> avec la nouvelle ressource.</li>
    </ol>
  </li>
  <li>Enregistrer l'heure dans <a href="#dom-performancetiming-domloading">domLoading</a> immédiatement avant que l'agent utilisateur ne fixe l'<a
    href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état
de préparation du document courant</a> à "loading".</li>
  <li>Enregistrer l'heure dans <a href="#dom-performancetiming-dominteractive">domInteractive</a>
    immédiatement avant que l'agent utilisateur ne fixe l'<a
    href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état
de préparation du document courant</a> à "interactive".</li>
  <li>Enregistrer l'heure dans <a
    href="#dom-performancetiming-domcontenteventstart">domContentLoadedEventStart</a> immédiatement avant que l'agent utilisateur ne lance <a href="http://www.w3.org/TR/html5/syntax.html#the-end">l'évènement
    DOMContentLoaded</a> sur le document.</li>
  <li>Enregistrer l'heure dans <a
    href="#dom-performancetiming-domcontenteventend">domContentLoadedEventEnd</a> immédiatement après l'achèvement de
    <a href="http://www.w3.org/TR/html5/syntax.html#the-end">l'évènement
    DOMContentLoaded</a>.</li>
  <li>Enregistrer l'heure dans <a href="#dom-performancetiming-domcomplete">domComplete</a>
    immédiatement avant que l'agent utilisateur ne fixe l'<a
    href="http://www.w3.org/TR/html5/dom.html#current-document-readiness">état
de préparation du document courant</a> à "complete".</li>
  <li>Enregistrer l'heure dans <a href="#dom-performancetiming-loadstart">loadEventStart</a>
    avant que l'agent utilisateur ne lance l'évènement load.</li>
  <li>Enregistrer l'heure dans <a href="#dom-performancetiming-loadend">loadEventEnd</a>
    immédiatement après que l'agent utilisateur a terminé l'évènement load.</li>
</ol>

<!--
Note: the following statement is decided to be removed per discussion on
http://lists.w3.org/Archives/Public/public-web-perf/2012Jun/0029.html
<p>Some user agents maintain the DOM structure of the document in memory
during navigation operations such as forward and backward. In those cases,
the window.performance.timing and window.performance.navigation objects must not
be altered during the navigation.</p>
-->

<h3 id="garbage-collection"><span class="secno">5.2 </span>Récupération de mémoire</h3>
<p>
Il existe des <a href="http://www.w3.org/TR/html5/infrastructure.html#implied-strong-reference">
implications fortes</a> depuis l'objet window envers ses objets
window.performance.timing et window.performance.navigation.
</p>

<h3 id="mono-clock"><span class="secno">5.3 </span>Horloge Monotone</h3>
<p>La valeur des attributs de mesure de durée doit augmenter de manière monotone afin de garantir que les attributs de mesure de durée ne sont pas faussés
par des ajustements à l'horloge du système pendant la navigation. La différence entre n'importe lesquels de deux attributs de mesure de durée enregistrés chronologiquement
ne doit jamais être négative. Pour toutes les navigations, y compris les navigations au sein d'un même document,
l'agent utilisateur doit enregistrer l'horloge du système au début de la navugation du document racine,
et définir les attributs de mesure de durée subséquents selon les termes d'une horloge monotone mesurant la durée écoulée
depuis le début de la navigation.
</p>

<h3 id="vendor-prefixes"><span class="secno">5.4 </span>Préfixes de fournisseurs</h3>
<p>Les extensions d'agent utilisateur propriétaires, spécifiques au fournisseurs, sont découragées. Si de telles extensions sont nécessaires,
par exemple pour des besoins expérimentaux, les fournisseurs doivent utiliser les mécanismes d'extension suivants :</p>

<ul>
<li>Si l'extension à ajouter est de type navigation, le nouveau type doit
  <ul>
  <li>suivre la convention de nommage suivante : TYPE_[VENDORPREFIX]_[TYPE], où [VENDORPREFIX] est un nom
  qui identifie le fournisseur.</li>
  <li>avoir une valeur dans la série 100 à 200.</li>
  </ul>
</li>
<li>Si l'extension est un nouvel attribut de mesure de durée, il doit
  <ul>
  <li>suivre la convention de nommage : [vendorPrefix]TimeAttribute, où [vendorPrefix] identifie
  le nom du fournisseur et TimeAttribute identifie le nom de l'attribut de mesure de durée.</li>
  <li>utiliser une horloge monotone croissante, tel que défini dans <a href="#mono-clock">Section 5.3 Horloge Monotone</a>.</li>
  <li>être mesuré en millisecondes depuis minuit le 1er janvier 1970 (UTC), tel que
  défini dans <a href="#terminology">Section 3 Terminologie</a>.</li>
  </ul>
</li>
<li>Si l'extension est un nouvel attribut de navigation, il doit suivre la convention de
  nommage: [vendorPrefix]NavigationAttribute, où [vendorPrefix] identifie
  le nom du fournisseur et NavigationAttribute identifie le nom de l'attribut de navigation.</li>

</ul>

<h2 id="privacy"><span class="secno">6 </span>Données privées</h2>
<p>Cette section n'est pas normative.</p>

<h3 id="info_disclosure"><span class="secno">6.1 </span>Divulgation d'informations</h3>
<p>Il existe un potentiel pour la divulgation de l'historique de navigation et d'activité de l'utilisateur final
en utilisant des attaques temporelles conçues avec soin. Par exemple, le temps de déchargement révèle
combien de temps il est nécessaire à la page précédente pour exécuter son gestionnaire de déchargement,
ce qui pourrait être utilisée pour déduire l'état de connexion de l'utilisateur.
Ces attaques ont été atténués par l'application de la règle de même
<a href="http://tools.ietf.org/html/rfc6454">origine</a> lorsqu'on accède
à des informations de mesure de durée impliquant la dernière navigation.</p>

<p>La <a href="http://www.w3.org/TR/html5/browsers.html#relaxing-the-same-origin-restriction">politique de même origine détendue</a>
n'offre pas une protection suffisante contre les visites non autorisées entre les documents.
En hébergement mutualisé, une tierce partie non approuvée a la possibilité
d'héberger un serveur HTTP à la même adresse IP, mais sur un autre port.</p>

<h3 id="cross-directory"><span class="secno">6.2 </span>Accès inter-dossiers</h3>
<p>Different pages qui partagent un nom d'hôte, par exemple des contenus de différents auteurs hébergés
sur des sites avec du contenu généré par l'utilisateur, sont considérées comme ayant la même origine,
parce qu'il n'y a aucune fonctionnalité pour restreindre l'accès par chemin. Naviguer entre ces pages permet à une page donnée d'accéder aux informations de mesure de durée de la précédente, comme par exemple la mesure de durée de redirection et de l'évènement unload.</p>

<h2 id="security"><span class="secno">7 </span>Sécurité</h2>
<p>Cette section n'est pas normative.</p>

<h3 id="authentication"><span class="secno">7.1 </span>Détection de serveurs proxy</h3>
<p>Dans le cas où un proxy est déployé entre l'agent utilisateur et le serveur Web, la durée de temps entre
les attributs <a href="#dom-performancetiming-connectstart">connectStart</a> et
<a href="#dom-performancetiming-connectend">connectEnd</a> indique le délai entre l'agent utilisateur
et le proxy au lieu du serveur Web. Ainsi, le serveur Web peut potentiellement détecter
l'existence du proxy. Pour les proxys SOCKS, cet intervalle de temps inclut la durée d'authentification au proxy
et la durée que le proxy met pour se connecter au serveur Web, ce qui complique la détection du proxy.
Dans le cas d'un proxy HTTP, l'agent utilisateur pourrait n'avoir aucune connaissance du serveur proxy,
et donc il est toujours possible d'atténuer cette attaque.</p>

<h3 id="readonly"><span class="secno">7.2 </span>Falsification en remplaçant les objets de mesure de durée</h3>
<p>L'objet window.performance est remplaçable afin d'éviter les conflits avec les pages existantes qui utilisent
le même objet. En faisant cela, il est possible pour une tierce partie de remplacer l'objet, et les scripts
qui s'appuient sur l'interface décrite dans ce document pourraient être cassées.</p>

<h2 id="references"><span class="secno">8 </span>Références</h2>

<h3 id="normative-references"><span class="secno">8.1 </span>Références Normatives</h3>

<dl>
<dt><a id='rfc2119'>[IETF RFC 2119]</a></dt>
<dd>
 <cite><a href='http://www.ietf.org/rfc/rfc2119.txt'>Key words for use in RFCs to Indicate Requirement Levels</a></cite>, Scott Bradner, Auteur. Internet Engineering Task Force, Mars 1997. Disponible à <a href='http://www.ietf.org/rfc/rfc2119.txt'>http://www.ietf.org/rfc/rfc2119.txt</a>.
</dd>
<dt><a id='rfc2616'>[IETF RFC 2616]</a></dt>
<dd>
 <cite><a href='http://www.ietf.org/rfc/rfc2616.txt'>Hypertext Transfer Protocol -- HTTP/1.1</a></cite>, R. Fielding et al., Auteurs. Internet Engineering Task Force, Juin 1999. Disponible à <a href='http://www.ietf.org/rfc/rfc2616.txt'>http://www.ietf.org/rfc/rfc2616.txt</a>.
</dd>
<dt>[<a id='rfc6454'>IETF RFC 6454</a>]</dt>
<dd>
 <cite><a href='http://tools.ietf.org/html/rfc6454'>The Web Origin Concept</a></cite>, Adam Barth, Auteur.  Internet Engineering Task Force, Décembre 2011. Disponible à <a href='http://www.ietf.org/rfc/rfc6454.txt'>http://www.ietf.org/rfc/rfc6454.txt</a>.
</dd>
<dt>[<a id="ECMA262">ECMA-262</a>]</dt><dd>
	<cite><a href='http://www.ecma-international.org/publications/standards/Ecma-262.htm'>ECMAScript Language Specification</a></cite>, 5.1
	Edition. ECMA International, Standard
	ECMA-262, Juin 2011. Cette version du Langage ECMAScript
	est disponible par le biais de <a href='http://www.ecma-international.org/publications/standards/Ecma-262.htm'>http://www.ecma-international.org/publications/standards/Ecma-262.htm</a>.
<dt>[<a id="HTML5">HTML5</a>]</dt>
<dd><cite><a href='http://www.w3.org/TR/html5/'>HTML5</a></cite>, Robin Berjon et al., Éditeurs. World Wide Web Consortium, Décembre 2012. Cette version de HTML5 est disponible par le biais de <a href='http://www.w3.org/TR/html5/'>http://www.w3.org/TR/html5/</a>. Le <a href='http://www.w3.org/html/wg/drafts/html/CR/'>dernier document de travail de l'éditeur</a> de HTML5 est disponible à http://www.w3.org/html/wg/drafts/html/CR/.</dd>
   <dt>[<a id="WebIDL">Web IDL</a>]</dt>
   <dd><cite><a href='http://www.w3.org/TR/2012/CR-WebIDL-20120419/'>Web IDL</a></cite>, Cameron McCormack, Éditeur. World Wide Web Consortium, Avril 2012. Cette version de la spécification Web IDL specification est disponible par le biais de http://www.w3.org/TR/2012/CR-WebIDL-20120419/. La <a href='http://www.w3.org/TR/WebIDL/'>dernière version de Web IDL</a> est disponible à http://www.w3.org/TR/WebIDL/.</dd>
</dl>

<h3 id="informative-references"><span class="secno">8.2 </span>Références Informatives</h3>

<dl>
<dt>[<a id="JSMeasure">JSMEASURE</a>]</dt>
<dd><cite><a href='http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.69.7329&amp;rep=rep1&amp;type=pdf'>Measuring Client-Perceived Response Times on the WWW</a></cite>, R. Rajamony et M. Elnozahy, The Proceedings of the 3rd USENIX Symposium on Internet Technologies and Systems (USITS), Mars 2001.</dd>

<dt>[<a id="NavigationTiming2">Navigation Timing 2</a>]</dt>

<dd><cite><a href='http://w3c-test.org/webperf/specs/NavigationTiming2/'>Navigation
Timing 2</a></cite>, Jatinder Mann, Arvind Jain, Éditeurs. World Wide
Web Consortium, <em>non publié</em>.</dd>
</dl>

<h2 class="no-num" id="acknowledgements">Remerciements</h2>

<p>Je voudrais présenter mes sincères remerciements à toutes les personnes avec lesquelles j'ai
été en contact au sujet de ce document de travail, ce qui inclut Anderson Quach, Alex Russell,
Alois Reitbauer, Annie Sullivan, Christian Biesinger, Darin Fisher, Eric
Lawrence, James Simonsen, Jatinder Mann, Jason Sobel, Jason Weber, Jonas Sicking, Kyle Scholz,
Lenny Rachitsky, Nic Jansma, Richard Rabbat, Sergey Novikov, Sigbjørn Vik,
Steve Souders, Tony Gentilcore pour leurs revues et leurs retours.</p>
</body>
</html>
